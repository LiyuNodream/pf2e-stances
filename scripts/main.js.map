{"version":3,"file":"main.js","mappings":"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","sources":["webpack:///./src/sheet.ts","webpack:///./src/stances.ts","webpack:///../../../../foundryVTT-projects/@utils/foundry/flags.ts","webpack:///../../../../foundryVTT-projects/@utils/foundry/localize.ts","webpack:///../../../../foundryVTT-projects/@utils/foundry/notification.ts","webpack:///../../../../foundryVTT-projects/@utils/foundry/path.ts","webpack:///../../../../foundryVTT-projects/@utils/module.ts","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./src/main.ts"],"sourcesContent":["import { localize } from '@utils/foundry/localize'\r\nimport { templatePath } from '@utils/foundry/path'\r\nimport { getEffects, getStances } from './stances'\r\n\r\nexport async function renderCharacterSheetPF2e(sheet: CharacterSheetPF2e, html: JQuery) {\r\n    const actor = sheet.actor\r\n    await addStances(actor, html)\r\n\r\n    html.find(\r\n        '.sheet-body .sheet-content [data-tab=actions] .tab-content .actions-panels [data-tab=encounter] .pf2e-stances .pf2e-stances__stance'\r\n    ).on('click', event => onToggleStance(event, actor))\r\n}\r\n\r\nexport function refreshCharacterSheets(actor: CharacterPF2e) {\r\n    for (const win of Object.values(ui.windows)) {\r\n        if (!(win instanceof ActorSheet)) continue\r\n        if (actor === (win as ActorSheetPF2e).actor) win.render()\r\n    }\r\n}\r\n\r\nasync function onToggleStance(event: JQuery.ClickEvent<any, any, HTMLElement>, actor: CharacterPF2e) {\r\n    const target = event.currentTarget\r\n    const canUseStances = target.closest('.pf2e-stances')?.classList.contains('can-use-stances')\r\n    if (!event.ctrlKey && !canUseStances) return\r\n\r\n    const effectUUID = target.dataset.effectUuid as ItemUUID\r\n    const effects = getEffects(actor)\r\n    const already = effects.findIndex(effect => effect.uuid === effectUUID)\r\n\r\n    let create = false\r\n\r\n    if (already < 0) {\r\n        create = true\r\n    } else if (effects.length) {\r\n        const other = effects.filter(effect => effect.uuid !== effectUUID).length\r\n        const more = effects.filter(effect => effect.uuid === effectUUID).length > 1\r\n        if (other || more) effects.splice(already, 1)\r\n    }\r\n\r\n    if (effects.length) {\r\n        await actor.deleteEmbeddedDocuments(\r\n            'Item',\r\n            effects.map(x => x.id)\r\n        )\r\n    }\r\n\r\n    if (create) {\r\n        const effect = await fromUuid<EffectPF2e>(effectUUID)\r\n        if (effect) {\r\n            const items = (await actor.createEmbeddedDocuments('Item', [effect.toObject()])) as EffectPF2e[]\r\n            items[0]?.toMessage()\r\n        }\r\n    }\r\n}\r\n\r\nasync function addStances(actor: CharacterPF2e, html: JQuery) {\r\n    const stances = getStances(actor).sort((a, b) => a.name.localeCompare(b.name))\r\n    if (!stances.length) return\r\n\r\n    const inCombat = actor.getActiveTokens(true, true).some(token => token.inCombat)\r\n    const options = html.find(\r\n        '.sheet-body .sheet-content [data-tab=actions] .tab-content .actions-panels [data-tab=encounter] .actions-options'\r\n    )\r\n    const template = await renderTemplate(templatePath('stances.hbs'), {\r\n        stances,\r\n        canUseStances: inCombat && !actor.isDead,\r\n        i18n: localize,\r\n    })\r\n\r\n    options.after(template)\r\n}\r\n","import { getSourceId } from '@utils/foundry/flags'\r\n\r\ntype StanceData = { feat: ItemUUID; effect: ItemUUID; replace?: ItemUUID }\r\ntype ReturnedStance = { name: string; img: string; effectUUID: ItemUUID; effectID: string }\r\n\r\nconst STANCES: StanceData[] = [\r\n    {\r\n        // Buckler Dance\r\n        feat: 'Compendium.pf2e.feats-srd.tDWc2LQNl0Op1Auq',\r\n        effect: 'Compendium.pf2e-stances.effects.PS17dsXkTdQmOv7w',\r\n    },\r\n    {\r\n        // Cobra Stance\r\n        feat: 'Compendium.pf2e.feats-srd.AkV4Jyllo6nlK2Sl',\r\n        effect: 'Compendium.pf2e.feat-effects.CgxYa0lrLUjS2ZhI',\r\n    },\r\n    {\r\n        // Cobra Stance (Envenom)\r\n        feat: 'Compendium.pf2e.feats-srd.xQuNswWB3eg1UM28',\r\n        effect: 'Compendium.pf2e.feat-effects.2Qpt0CHuOMeL48rN',\r\n        replace: 'Compendium.pf2e.feats-srd.AkV4Jyllo6nlK2Sl', // Cobra Stance\r\n    },\r\n    {\r\n        // Crane Stance\r\n        feat: 'Compendium.pf2e.feats-srd.bf7NCeKqDClaqhTR',\r\n        effect: 'Compendium.pf2e.feat-effects.nwkYZs6YwXYAJ4ps',\r\n    },\r\n    {\r\n        // Disarm Stance\r\n        feat: 'Compendium.pf2e.feats-srd.1p5ErCp33nGOzEsk',\r\n        effect: 'Compendium.pf2e.feat-effects.LxSev4GNKv26DbZw',\r\n    },\r\n    {\r\n        // Disruptive Stance\r\n        feat: 'Compendium.pf2e.feats-srd.OEGhbRgW6wRbccns',\r\n        effect: 'Compendium.pf2e-stances.effects.qBR3kqGCeKp3T2Be',\r\n    },\r\n    {\r\n        // Dragon Stance\r\n        feat: 'Compendium.pf2e.feats-srd.8sy3sHwOHS4ImwvJ',\r\n        effect: 'Compendium.pf2e.feat-effects.qUowHpn79Dpt1hVn',\r\n    },\r\n    {\r\n        // Dread Marshal Stance\r\n        feat: 'Compendium.pf2e.feats-srd.R7c4PyTNkZb0yvoT',\r\n        effect: 'Compendium.pf2e.feat-effects.KBEJVRrie2JTHWIK',\r\n    },\r\n    {\r\n        // Dueling Dance (Fighter)\r\n        feat: 'Compendium.pf2e.feats-srd.FYz5eQeTox9IDkSd',\r\n        effect: 'Compendium.pf2e.feat-effects.KiuBRoMFxL2Npt51',\r\n    },\r\n    {\r\n        // Dueling Dance (Swashbuckler)\r\n        feat: 'Compendium.pf2e.feats-srd.9VGmE7X4aK2W8YWj',\r\n        effect: 'Compendium.pf2e.feat-effects.KiuBRoMFxL2Npt51',\r\n    },\r\n    {\r\n        // Everstand Stance\r\n        feat: 'Compendium.pf2e.feats-srd.6GN1zh3RcnZhrzxP',\r\n        effect: 'Compendium.pf2e.feat-effects.GGebXpRPyONZB3eS',\r\n    },\r\n    {\r\n        // Fane's Fourberie\r\n        feat: 'Compendium.pf2e.feats-srd.80CEAB05TP5ki9iW',\r\n        effect: 'Compendium.pf2e-stances.effects.GvqB4M8LrHpzYEvl',\r\n    },\r\n    {\r\n        // Gorilla Stance\r\n        feat: 'Compendium.pf2e.feats-srd.DqD7htz8Sd1dh3BT',\r\n        effect: 'Compendium.pf2e.feat-effects.RozqjLocahvQWERr',\r\n    },\r\n    {\r\n        // Gorilla Stance (Pound)\r\n        feat: 'Compendium.pf2e.feats-srd.nRjyyDulHnP5OewA',\r\n        effect: 'Compendium.pf2e.feat-effects.UZKIKLuwpQu47feK',\r\n        replace: 'Compendium.pf2e.feats-srd.DqD7htz8Sd1dh3BT',\r\n    },\r\n    {\r\n        // Graceful Poise\r\n        feat: 'Compendium.pf2e.feats-srd.rFaUJtB46scuAidY',\r\n        effect: 'Compendium.pf2e-stances.effects.mark4VEQoynfYNBF',\r\n    },\r\n    {\r\n        // Impassable Wall Stance\r\n        feat: 'Compendium.pf2e.feats-srd.YeyOqNFKaeuOTiJr',\r\n        effect: 'Compendium.pf2e-stances.effects.zzC2qZwEKf4Ja3xD',\r\n    },\r\n    {\r\n        // Inspiring Marshal Stance\r\n        feat: 'Compendium.pf2e.feats-srd.bvOsJNeI0ewvQsFa',\r\n        effect: 'Compendium.pf2e.feat-effects.kzEPq4aczYb6OD2h',\r\n    },\r\n    {\r\n        // Ironblood Stance\r\n        feat: 'Compendium.pf2e.feats-srd.x9cYkB8DrUBBwqJd',\r\n        effect: 'Compendium.pf2e.feat-effects.tPKXLtDJ3bzJcXlv',\r\n    },\r\n    {\r\n        // Jellyfish Stance\r\n        feat: 'Compendium.pf2e.feats-srd.Jwq5o13uZF3ooln1',\r\n        effect: 'Compendium.pf2e.feat-effects.pkcr9w5x6bKzl3om',\r\n    },\r\n    {\r\n        // Lunging Stance\r\n        feat: 'Compendium.pf2e.feats-srd.ZghzLmYgeE19GqjP',\r\n        effect: 'Compendium.pf2e-stances.effects.W8CKuADdbODpBh6O',\r\n    },\r\n    {\r\n        // Masquerade of Seasons Stance\r\n        feat: 'Compendium.pf2e.feats-srd.KMVXUgFArcftg1jQ',\r\n        effect: 'Compendium.pf2e.feat-effects.6IsZQpwRJQWIzdGx',\r\n    },\r\n    {\r\n        // Mobile Shot Stance\r\n        feat: 'Compendium.pf2e.feats-srd.rByA8NDI6ZtNgBeT',\r\n        effect: 'Compendium.pf2e-stances.effects.NWOmJ6WJFheaGhho',\r\n    },\r\n    {\r\n        // Monastic Archer Stance\r\n        feat: 'Compendium.pf2e.feats-srd.YG2RxXE9SMfwo6wP',\r\n        effect: 'Compendium.pf2e.feat-effects.1dxD3xsTzak6GNj5',\r\n    },\r\n    {\r\n        // Mountain Stance\r\n        feat: 'Compendium.pf2e.feats-srd.ZL5UU9quCTvcWzfY',\r\n        effect: 'Compendium.pf2e.feat-effects.gYpy9XBPScIlY93p',\r\n    },\r\n    {\r\n        // Multishot Stance\r\n        feat: 'Compendium.pf2e.feats-srd.RzhnxgiAopWILCvs',\r\n        effect: 'Compendium.pf2e.feat-effects.l4QUaedYofnfXig0',\r\n    },\r\n    {\r\n        // Paragon's Guard\r\n        feat: 'Compendium.pf2e.feats-srd.hPDerDCYmag3s0dP',\r\n        effect: 'Compendium.pf2e.feat-effects.6EDoy3OSFZ4L3Vs7',\r\n    },\r\n    {\r\n        // Peafowl Stance\r\n        feat: 'Compendium.pf2e.feats-srd.C3MgEkPNaIhTddbr',\r\n        effect: 'Compendium.pf2e.feat-effects.vjvcccAwdkOLA1Fc',\r\n    },\r\n    {\r\n        // Point-Blank Shot\r\n        feat: 'Compendium.pf2e.feats-srd.Yl2wYv24v5kw95aS',\r\n        effect: 'Compendium.pf2e.feat-effects.9HPxAKpP3WJmICBx',\r\n    },\r\n    {\r\n        // Powder Punch Stance\r\n        feat: 'Compendium.pf2e.feats-srd.Ziky4XVV7syXVbUg',\r\n        effect: 'Compendium.pf2e-stances.effects.kDTiRg9vVOYNnTyr',\r\n    },\r\n    {\r\n        // Push Back the Dead!\r\n        feat: 'Compendium.pf2e.feats-srd.BtZJJClWCpc31Ven',\r\n        effect: 'Compendium.pf2e.feat-effects.OeZ0E1oUKyGPxPy0',\r\n    },\r\n    {\r\n        // Rain of Embers Stance\r\n        feat: 'Compendium.pf2e.feats-srd.rbiMK71SvGZGRLJ1',\r\n        effect: 'Compendium.pf2e.feat-effects.Im5JBInybWFbHEYS',\r\n    },\r\n    {\r\n        // Reflective Ripple Stance\r\n        feat: 'Compendium.pf2e.feats-srd.knZUN4sYExIyRC4F',\r\n        effect: 'Compendium.pf2e.feat-effects.QDQwHxNowRwzUx9R',\r\n    },\r\n    {\r\n        // Ricochet Stance (Fighter)\r\n        feat: 'Compendium.pf2e.feats-srd.tRHjUCl0xqG97nok',\r\n        effect: 'Compendium.pf2e-stances.effects.Unfl4QQURWaX2zfd',\r\n    },\r\n    {\r\n        // Ricochet Stance (Rogue)\r\n        feat: 'Compendium.pf2e.feats-srd.RsNvCSrCN7czHC0G',\r\n        effect: 'Compendium.pf2e-stances.effects.Unfl4QQURWaX2zfd',\r\n    },\r\n    {\r\n        // Rough Terrain Stance\r\n        feat: 'Compendium.pf2e.feats-srd.O0POcPD2aELYTcIK',\r\n        effect: 'Compendium.pf2e-stances.effects.YkiTA74FrUUu5IvI',\r\n    },\r\n    {\r\n        // Shooting Stars Stance\r\n        feat: 'Compendium.pf2e.feats-srd.6cQSPqXoAO6oJl0i',\r\n        effect: 'Compendium.pf2e.feat-effects.RXbfq6oqzVnW6xOV',\r\n    },\r\n    {\r\n        // Six Pillars Stance\r\n        feat: 'Compendium.pf2e.feats-srd.hT0pVPqFuiEsmRb8',\r\n        effect: 'Compendium.pf2e.feat-effects.P80mwvCAEncR2snK',\r\n    },\r\n    {\r\n        // Sky and Heaven Stance\r\n        feat: 'Compendium.pf2e.feats-srd.UjEeHamC2C8JfgJz',\r\n        effect: 'Compendium.pf2e.feat-effects.CQfkyJkRHw4IHWhv',\r\n    },\r\n    {\r\n        // Stoked Flame Stance\r\n        feat: 'Compendium.pf2e.feats-srd.GuEdTz1VMEptQnOd',\r\n        effect: 'Compendium.pf2e.feat-effects.rp1YauUSULuqW8rs',\r\n    },\r\n    {\r\n        // Stumbling Stance\r\n        feat: 'Compendium.pf2e.feats-srd.7FRYyKXDKjGoANYj',\r\n        effect: 'Compendium.pf2e.feat-effects.BCyGDKcplkJiSAKJ',\r\n    },\r\n    {\r\n        // Tangled Forest Stance\r\n        feat: 'Compendium.pf2e.feats-srd.2tUdsoPEnW9yS8so',\r\n        effect: 'Compendium.pf2e.feat-effects.PMHwCrnh9W4sMu5b',\r\n    },\r\n    {\r\n        // Tiger Stance\r\n        feat: 'Compendium.pf2e.feats-srd.VCjAlOvjNvFJOsG5',\r\n        effect: 'Compendium.pf2e.feat-effects.pf9yvKNg6jZLrE30',\r\n    },\r\n    {\r\n        // Twinned Defense (Fighter)\r\n        feat: 'Compendium.pf2e.feats-srd.xjLbabfyQzBNT4y1',\r\n        effect: 'Compendium.pf2e-stances.effects.3eHMqVx30JGiJqtM',\r\n    },\r\n    {\r\n        // Twinned Defense (Swashbuckler)\r\n        feat: 'Compendium.pf2e.feats-srd.kTRGAST9J9ZxJZ4A',\r\n        effect: 'Compendium.pf2e-stances.effects.3eHMqVx30JGiJqtM',\r\n    },\r\n    {\r\n        // Vitality-Manipulating Stance\r\n        feat: 'Compendium.pf2e.feats-srd.Tj79ePSD212EZjRM',\r\n        effect: 'Compendium.pf2e.feat-effects.h45sUZFs5jhuQdCE',\r\n    },\r\n    {\r\n        // Whirling Blade Stance\r\n        feat: 'Compendium.pf2e.feats-srd.IaiEZaA8erufMUCr',\r\n        effect: 'Compendium.pf2e.feat-effects.JefXqvhzUeBArkAP',\r\n    },\r\n    {\r\n        //  Whirlwind Stance\r\n        feat: 'Compendium.pf2e.feats-srd.wZZyasfIqwiJBQAQ',\r\n        effect: 'Compendium.pf2e-stances.effects.q6UokHWSEcEYWmvh',\r\n    },\r\n    {\r\n        // Wolf Stance\r\n        feat: 'Compendium.pf2e.feats-srd.AN9jY1JVcU20Qdw6',\r\n        effect: 'Compendium.pf2e.feat-effects.b2kWJuCPj1rDMdwz',\r\n    },\r\n]\r\n\r\nconst FEATS: Map<ItemUUID, StanceData> = new Map(STANCES.map(stance => [stance.feat, stance]))\r\nconst EFFECTS: Map<ItemUUID, StanceData> = new Map(STANCES.map(stance => [stance.effect, stance]))\r\n\r\nexport function getStances(actor: CharacterPF2e) {\r\n    const stances: StanceData[] = []\r\n    const replaced: ItemUUID[] = []\r\n    const effects: Map<ItemUUID, string> = new Map()\r\n\r\n    for (const feat of actor.itemTypes.feat) {\r\n        const sourceId = getSourceId(feat)\r\n        const stance = sourceId && FEATS.get(sourceId)\r\n        if (!stance) continue\r\n\r\n        stances.push(stance)\r\n        if (stance.replace) replaced.push(stance.replace)\r\n    }\r\n\r\n    for (const effect of actor.itemTypes.effect) {\r\n        const sourceId = getSourceId(effect)\r\n        if (!sourceId || !EFFECTS.has(sourceId)) continue\r\n        effects.set(sourceId, effect.id)\r\n    }\r\n\r\n    const filtered = stances.filter(stance => !replaced.includes(stance.feat))\r\n\r\n    return filtered\r\n        .map(stance => {\r\n            const feat = fromUuidSync<CompendiumIndexData>(stance.feat)\r\n            const effect = fromUuidSync<CompendiumIndexData>(stance.effect)\r\n            const replace = stance.replace && fromUuidSync<CompendiumIndexData>(stance.replace)\r\n            if (!feat || !effect) return\r\n\r\n            const returned: ReturnedStance = {\r\n                name: replace ? replace.name : feat.name,\r\n                img: effect.img,\r\n                effectID: effects.get(stance.effect) ?? '',\r\n                effectUUID: stance.effect,\r\n            }\r\n\r\n            return returned\r\n        })\r\n        .filter(stance => stance) as ReturnedStance[]\r\n}\r\n\r\nexport function getEffects(actor: CharacterPF2e) {\r\n    const effects = []\r\n\r\n    for (const effect of actor.itemTypes.effect) {\r\n        const sourceId = getSourceId(effect)\r\n        if (!sourceId || !EFFECTS.has(sourceId)) continue\r\n        effects.push({ uuid: sourceId, id: effect.id })\r\n    }\r\n\r\n    return effects\r\n}\r\n","import { MODULE_ID } from '@utils/module'\r\n\r\nexport function hasModuleFlag(doc: foundry.abstract.Document) {\r\n    return getProperty(doc, `flags.${MODULE_ID}`) !== undefined\r\n}\r\n\r\nexport function flagPath(key: string) {\r\n    return `flags.${MODULE_ID}.key`\r\n}\r\n\r\nexport function getFlag<T extends unknown>(doc: foundry.abstract.Document, key: string): T | undefined\r\nexport function getFlag<T extends unknown>(doc: foundry.abstract.Document, key: string, fallback: T): T\r\nexport function getFlag<T extends unknown>(doc: foundry.abstract.Document, key: string, fallback?: T): T | undefined {\r\n    return (doc.getFlag(MODULE_ID, key) as T | undefined) ?? fallback\r\n}\r\n\r\n/**\r\n * @template {foundry.Document} T\r\n * @param {T} doc\r\n * @param {string} key\r\n * @param {any} value\r\n * @returns T\r\n */\r\nexport function setFlag(doc: foundry.abstract.Document, key: string, value: unknown) {\r\n    return doc.setFlag(MODULE_ID, key, value)\r\n}\r\n\r\nexport function getSourceId(doc: ClientDocument) {\r\n    return doc.getFlag<ItemUUID>('core', 'sourceId')\r\n}\r\n\r\nexport function hasSourceId(doc: ClientDocument, sourceId: DocumentUUID) {\r\n    return getSourceId(doc) === sourceId\r\n}\r\n\r\nexport function includesSourceId(doc: ClientDocument, list: DocumentUUID[]) {\r\n    const sourceId = getSourceId(doc)\r\n    return sourceId ? list.includes(sourceId) : false\r\n}\r\n","import { MODULE_ID } from '@utils/module'\r\nimport { warn, NotifyArgs, info, error } from '@utils/foundry/notification'\r\n\r\nexport type LocalizeArgs = [key: string, data?: Record<string, string | number | boolean>]\r\n\r\nexport function localize(...args: LocalizeArgs) {\r\n    let [key, data] = args\r\n    key = `${MODULE_ID}.${key}`\r\n    if (data) return game.i18n.format(key, data)\r\n    return game.i18n.localize(key)\r\n}\r\n\r\nexport function hasLocalization(key: string) {\r\n    return game.i18n.has(`${MODULE_ID}.${key}`, false)\r\n}\r\n\r\nexport function localizePath(key: string) {\r\n    return `${MODULE_ID}.${key}`\r\n}\r\n\r\nexport function subLocalize(subKey: string) {\r\n    const fn = (...args: LocalizeArgs) => localize(`${subKey}.${args[0]}`, args[1])\r\n\r\n    Object.defineProperties(fn, {\r\n        warn: {\r\n            value: (...args: NotifyArgs) => warn(`${subKey}.${args[0]}`, args[1], args[2]),\r\n            enumerable: false,\r\n            configurable: false,\r\n        },\r\n        info: {\r\n            value: (...args: NotifyArgs) => info(`${subKey}.${args[0]}`, args[1], args[2]),\r\n            enumerable: false,\r\n            configurable: false,\r\n        },\r\n        error: {\r\n            value: (...args: NotifyArgs) => error(`${subKey}.${args[0]}`, args[1], args[2]),\r\n            enumerable: false,\r\n            configurable: false,\r\n        },\r\n        has: {\r\n            value: (key: string) => hasLocalization(`${subKey}.${key}`),\r\n            enumerable: false,\r\n            configurable: false,\r\n        },\r\n        path: {\r\n            value: (key: string) => localizePath(`${subKey}.${key}`),\r\n            enumerable: false,\r\n            configurable: false,\r\n        },\r\n    })\r\n\r\n    return fn as ((...args: LocalizeArgs) => string) & {\r\n        warn: (...args: NotifyArgs) => void\r\n        info: (...args: NotifyArgs) => void\r\n        error: (...args: NotifyArgs) => void\r\n        has: (key: string) => boolean\r\n    }\r\n}\r\n","import { localize } from '@utils/foundry/localize'\r\n\r\nexport type NotifyArgs = [str: string, arg1?: boolean | Record<string, string | number | boolean>, arg2?: boolean]\r\n\r\nfunction notify(\r\n    str: string,\r\n    arg1?: 'warning' | 'info' | 'error' | boolean | Record<string, string | number | boolean>,\r\n    arg2?: boolean | Record<string, string | number | boolean>,\r\n    arg3?: boolean\r\n) {\r\n    const type = typeof arg1 === 'string' ? arg1 : 'info'\r\n    const data = typeof arg1 === 'object' ? arg1 : typeof arg2 === 'object' ? arg2 : undefined\r\n    const permanent = typeof arg1 === 'boolean' ? arg1 : typeof arg2 === 'boolean' ? arg2 : arg3 ?? false\r\n\r\n    ui.notifications.notify(localize(str, data), type, { permanent })\r\n}\r\n\r\nexport function warn(...args: NotifyArgs) {\r\n    const [str, arg1, arg2] = args\r\n    notify(str, 'warning', arg1, arg2)\r\n}\r\n\r\nexport function info(...args: NotifyArgs) {\r\n    const [str, arg1, arg2] = args\r\n    notify(str, 'info', arg1, arg2)\r\n}\r\n\r\nexport function error(...args: NotifyArgs) {\r\n    const [str, arg1, arg2] = args\r\n    notify(str, 'error', arg1, arg2)\r\n}\r\n","import { MODULE_ID } from '@utils/module'\r\n\r\nexport function getSettingLocalizationPath(...path: string[]) {\r\n    return `${MODULE_ID}.settings.${path.join('.')}`\r\n}\r\n\r\nexport function flagsUpdatePath(...path: string[]) {\r\n    return `flags.${MODULE_ID}.${path.join('/')}`\r\n}\r\n\r\nexport function templatePath(...path: string[]) {\r\n    path = path.filter(x => typeof x === 'string')\r\n    return `modules/${MODULE_ID}/templates/${path.join('/')}`\r\n}\r\n\r\nexport function imagePath(...path: string[]) {\r\n    return `modules/${MODULE_ID}/images/${path.join('/')}`\r\n}\r\n","export let MODULE_ID = ''\r\n\r\nexport function setModuleID(id: string) {\r\n    if (!MODULE_ID) MODULE_ID = id\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { setModuleID } from '@utils/module'\r\nimport { refreshCharacterSheets, renderCharacterSheetPF2e } from './sheet'\r\nimport { getEffects } from './stances'\r\n\r\nexport const MODULE_ID = 'pf2e-stances'\r\nsetModuleID(MODULE_ID)\r\n\r\nHooks.on('deleteCombatant', deleteCombatant)\r\nHooks.on('createCombatant', createCombatant)\r\nHooks.on('deleteCombat', deleteCombat)\r\n\r\nHooks.on('renderCharacterSheetPF2e', renderCharacterSheetPF2e)\r\n\r\nfunction deleteCombat(combat: Combat) {\r\n    for (const combatant of combat.combatants) {\r\n        deleteCombatant(combatant)\r\n    }\r\n}\r\n\r\nfunction deleteCombatant(combatant: Combatant) {\r\n    const actor = getActorFromCombatant(combatant)\r\n    if (!actor) return\r\n\r\n    const effects = getEffects(actor).map(effect => effect.id)\r\n\r\n    if (effects.length) actor.deleteEmbeddedDocuments('Item', effects)\r\n    else refreshCharacterSheets(actor)\r\n}\r\n\r\nfunction createCombatant(combatant: Combatant) {\r\n    const actor = getActorFromCombatant(combatant)\r\n    if (actor) refreshCharacterSheets(actor)\r\n}\r\n\r\nfunction getActorFromCombatant(combatant: Combatant) {\r\n    const actor = (combatant as CombatantPF2e).actor\r\n    if (!actor || actor.isToken || !actor.isOfType('character')) return\r\n    else return actor\r\n}\r\n"],"names":[],"sourceRoot":""}